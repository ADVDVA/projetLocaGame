<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui">
<ui:composition template="/WEB-INF/templates/simple.xhtml">
    <ui:define name="title">
        #{I18N['application.inscriptionpage.title']}
    </ui:define>
    <ui:define name="content">

        <div class ="containers">
            <h2>
                <h:outputText value="#{I18N['application.inscriptionpage.title']}"/>
            </h2>
            <h:form class="responsiveForm">
                <span class="responsiveInput">
                    <span>
                        <p:outputLabel for="input_lastname_inscription" value="#{I18N['application.inscriptionpage.lastnametitle']}"/>
                        <p:inputText id="input_lastname_inscription" value="#{userBean.lastName}"
                                placeholder="#{I18N['application.inscriptionpage.lastnameplaceholder']}"
                                validatorMessage="#{I18N['application.inscriptionpage.messageerrorlastname']}">
                            <p:ajax update="messageLastName" event="keyup"/>
                        </p:inputText>
                    </span>
                    <p:message id="messageLastName" for="@previous"/>
                </span>


                <span class="responsiveInput">
                    <span>
                        <p:outputLabel for="input_firstame_inscription" value="#{I18N['application.inscriptionpage.firstnametitle']}"/>
                        <p:inputText id="input_firstame_inscription" value="#{userBean.firstName}"
                                 placeholder="#{I18N['application.inscriptionpage.firstnameplaceholder']}"
                                 validatorMessage="#{I18N['application.inscriptionpage.messageerrorfirstname']}">
                            <p:ajax update="messageFirstName" event="keyup"/>
                        </p:inputText>
                    </span>
                    <p:message id="messageFirstName" for="@previous"/>
                </span>

                <span class="responsiveInput">
                    <span>
                        <p:outputLabel for="minmax" value="#{I18N['application.inscriptionpage.dayofbirthtitle']}"/>
                        <p:datePicker id="minmax" value="#{userBean.dateOfBirth}" mindate="#{userBean.minDate}"
                              placeholder="#{I18N['application.inscriptionpage.dayofbirthplaceholder']}"
                              maxdate="#{userBean.maxDate}" monthNavigator="true" yearNavigator="true" readonlyInput="true"
                              pattern="dd/MMyyyy"
                              validatorMessage="#{I18N['application.inscriptionpage.messageerrordayofbirth']}">
                        <p:ajax update="messageDateOfBirth" event="keyup"/>
                        </p:datePicker>
                    </span>
                    <p:message id="messageDateOfBirth" for="@previous"/>
                </span>

                <span class="responsiveInput">
                    <span>
                        <p:outputLabel for="input_phone_inscription" value="#{I18N['application.inscriptionpage.phonetitle']}"/>
                        <p:inputText id="input_phone_inscription" value="#{userBean.phone}"
                                 placeholder="#{I18N['application.inscriptionpage.phoneplaceholder']}"
                                 validatorMessage="#{I18N['application.inscriptionpage.messageerrorphone']}">
                            <p:ajax update="messagePhone" event="keyup"/>
                        </p:inputText>
                    </span>
                    <p:message id="messagePhone" for="@previous"/>
                </span>

                <span class="responsiveInput">
                    <span>
                        <p:outputLabel for="input_mail_inscription" value="#{I18N['application.inscriptionpage.mailtitle']}"/>
                        <p:inputText id="input_mail_inscription" value="#{userBean.mail}"
                                 placeholder="#{I18N['application.inscriptionpage.mailplaceholder']}">
                            <p:ajax update="messageErrorMail" event="keyup"/>
                        </p:inputText>
                    </span>
                </span>
                <span class="responsiveInput">
                    <span> </span>
                    <span>
                         <span class="placeMessageErrorCustomParent">
                            <p:outputPanel id="messageErrorMail">
                                    <f:metadata>
                                        <f:event type="preRenderView" listener="#{userBean.checkMail()}"/>
                                    </f:metadata>
                                <div class="ui-message ui-message-error ui-widget ui-corner-all placeMessageErrorCustomChild #{userBean.messageErrorMail}">
                                    <div class="placeMessageErrorCustomChild">
                                        <span class="ui-message-error-icon"> </span>
                                        <span class="ui-message-error-detail" id="messageMail_error_detail"><h:outputText value="#{I18N['application.inscriptionpage.messageerrormail']}"/></span>
                                    </div>
                                </div>
                            </p:outputPanel>
                        </span>
                    </span>
                </span>


                <span class="responsiveInput">
                    <span>
                        <p:outputLabel for="input_password_inscription" value="#{I18N['application.inscriptionpage.passwordtitle']}"/>
                        <p:password id="input_password_inscription" value="#{userBean.password}" toggleMask="true"
                                redisplay="true"
                                placeholder="#{I18N['application.inscriptionpage.passwordplaceholder']}"
                                validatorMessage="#{I18N['application.inscriptionpage.messageerrorpassword']}">
                            <p:ajax update="messagePassword" event="keyup"/>
                        </p:password>
                    </span>
                    <p:message id="messagePassword" for="@previous"/>
                </span>


                <span class="responsiveInput">
                    <span>
                        <p:outputLabel for="input_passwordverification_inscription" value="#{I18N['application.inscriptionpage.passwordverificationtitle']}"/>
                        <p:password id="input_passwordverification_inscription" value="#{userBean.passwordVerify}" toggleMask="true"
                                redisplay="true"
                                placeholder="#{I18N['application.inscriptionpage.passwordverificationplaceholder']}">
                            <p:ajax update="messagePasswordVerification" event="keyup"/>
                        </p:password>
                    </span>
                </span>
                <span class="responsiveInput">
                    <span> </span>
                    <span>
                         <span class="placeMessageErrorCustomParent">
                            <p:outputPanel id="messagePasswordVerification">
                                    <f:metadata>
                                        <f:event type="preRenderView" listener="#{userBean.checkPasswordVerify()}"/>
                                    </f:metadata>
                                <div class="ui-message ui-message-error ui-widget ui-corner-all placeMessageErrorCustomChild #{userBean.messageErrorPassword}">
                                    <div class="placeMessageErrorCustomChild">
                                        <span class="ui-message-error-icon"> </span>
                                        <span class="ui-message-error-detail" id="messagePasswordVerification_error_detail"><h:outputText value="#{I18N['application.inscriptionpage.messageerrorpasswordverification']}"/></span>
                                    </div>
                                </div>
                            </p:outputPanel>
                        </span>
                    </span>
                </span>


                <span class="responsiveInput">
                    <span>
                        <p:outputLabel for="input_street_inscription" value="#{I18N['application.inscriptionpage.streettitle']}"/>
                        <p:inputText id="input_street_inscription" value="#{userBean.street}"
                                    placeholder="#{I18N['application.inscriptionpage.streetplaceholder']}"
                                    validatorMessage="#{I18N['application.inscriptionpage.messageerrorstreet']}">
                            <p:ajax update="messageStreet" event="keyup"/>
                        </p:inputText>
                    </span>
                    <p:message id="messageStreet" for="@previous"/>
                </span>

                <span class="responsiveInput">
                    <span>
                        <p:outputLabel for="input_number_inscription" value="#{I18N['application.inscriptionpage.numbertitle']}"/>
                        <p:inputNumber id="input_number_inscription" value="#{userBean.number}"
                                placeholder="#{I18N['application.inscriptionpage.numberplaceholder']}"
                                validatorMessage="#{I18N['application.inscriptionpage.messageerrornumber']}">
                            <p:ajax update="messageNumber" event="keyup"/>
                        </p:inputNumber>
                    </span>
                    <p:message id="messageNumber" for="@previous"/>
                </span>

                <span class="responsiveInput">
                    <span>
                        <p:outputLabel for="input_box_inscription" value="#{I18N['application.inscriptionpage.boxtitle']}"/>
                        <p:inputText id="input_box_inscription" value="#{userBean.box}"
                                     placeholder="#{I18N['application.inscriptionpage.boxplaceholder']}"
                                     validatorMessage="#{I18N['application.inscriptionpage.messageerrorbox']}">
                            <p:ajax update="messageBox" event="keyup"/>
                        </p:inputText>
                    </span>
                    <p:message id="messageBox" for="@previous"/>
                </span>


                <span class="responsiveInput">
                    <span>
                        <p:outputLabel for="input_country_inscription" value="#{I18N['application.inscriptionpage.countrytitle']}"/>
                        <p:selectOneMenu id="input_country_inscription" value="#{userBean.country}"
                                 validatorMessage="#{I18N['application.inscriptionpage.messageerrorcountry']}">
                                <f:selectItem itemLabel="#{I18N['application.inscriptionpage.countryplaceholder']}" itemValue="#{null}"/>
                                <f:selectItems value="#{userBean.countryMap}"/>
                        </p:selectOneMenu>
                    </span>
                    <p:message for="@previous"/>
                </span>

                <span class="responsiveInput">
                    <span>
                        <p:outputLabel for="input_postalcode_inscription" value="#{I18N['application.inscriptionpage.postalcodetitle']}"/>
                        <p:inputText id="input_postalcode_inscription" value="#{userBean.postalCode}"
                                placeholder="#{I18N['application.inscriptionpage.postalcodeplaceholder']}"
                                validatorMessage="#{I18N['application.inscriptionpage.messageerrorpostalcode']}">
                             <p:ajax listener="#{userBean.updatePostalCodeWithCity}" update="input_city_inscription"/>
                             <p:ajax update="messageErrorPostalCode" event="keyup"/>
                        </p:inputText>
                    </span>
                    <p:message id="messageErrorPostalCode" for="@previous"/>
                </span>

                <span class="responsiveInput">
                    <span>
                        <p:outputLabel for="input_city_inscription" value="#{I18N['application.inscriptionpage.citytitle']}"/>
                        <p:selectOneMenu id="input_city_inscription" value="#{userBean.city}"
                                 validatorMessage="#{I18N['application.inscriptionpage.messageerrorcity']}">
                            <f:selectItem itemLabel="#{I18N['application.inscriptionpage.cityplaceholder']}" itemValue="#{null}"/>
                            <f:selectItems value="#{userBean.citiesMap}"/>
                        </p:selectOneMenu>
                    </span>
                    <p:message for="@previous"/>
                </span>

                <span class="responsiveSubmit">
                    <p:commandButton value="#{I18N['application.inscriptionpage.buttonsubmit']}" ajax="false"
                                 validateClient="true"
                                 class="ui-button-success"
                                 action="#{userBean.lastVerificationSignUp}"/>

                </span>
            </h:form>
            <div class="responsiveForm positionCancel">
                <span class="responsiveSubmit">
                    <span class="flexGrowOne"> </span>
                        <p:commandButton value="#{I18N['application.inscriptionpage.buttonreturn']}" action="#{userBean.goToPageConnection}"
                                 class="ui-button-danger" id="cancelButtonSignUp"/>
                </span>

            </div>
        </div>
    </ui:define>
</ui:composition>
</html>
