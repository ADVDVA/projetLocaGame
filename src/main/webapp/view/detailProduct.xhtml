<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:jsp="http://java.sun.com/JSP/Page"
      xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html">

<!-- ______ ______ -->

<ui:composition template="/WEB-INF/templates/simple.xhtml">
    <ui:define name="title">
        #{I18N['application.header.detailProduct']}
    </ui:define>
    <ui:define name="content">

        <!-- load price platform selected from other page. + save historic.-->
        <f:metadata>
            <f:event type="preRenderView" listener="#{pricePlatformBean.loadPricePlatformSelected(pricePlatformListBean)}"/>
            <f:event type="preRenderView" listener="#{historicalBean.saveNewPageHistoric('/view/detailProduct')}"/>
        </f:metadata>

        <div class ="containers">

            <!-- error loading message -->
            <p:outputPanel rendered="#{pricePlatformBean.pricePlatformSelectedIsErrorLoad()}">
                <h2>
                    <h:outputText value="#{I18N['application.detailproductpage.errorloadtitle']}"/>
                </h2>
                <p class="textCenter">
                    <h:outputText value="#{I18N['application.detailproductpage.errorloadmessage']}"/>
                </p>
            </p:outputPanel>

            <!-- no error -->
            <p:outputPanel rendered="#{!pricePlatformBean.pricePlatformSelectedIsErrorLoad()}">

                <div>
                    <h2>
                        <h:outputText value="#{pricePlatformBean.pricePlatformSelected.idProduct.productName}"/>
                    </h2>
                </div>

                <!-- Main form start ________________________________________________________________ -->
                <h:form class="responsiveForm">

                    <span class="responsiveInput">
                        <span>
                            <p:outputLabel for="inputProductName" value="#{I18N['application.detailproductpage.labelproductname']}"/>
                            <p:inputText id="inputProductName"
                                         value="#{pricePlatformBean.pricePlatformSelected.idProduct.productName}"
                                         disabled="#{pricePlatformBean.isModeSelected('r')}"
                                         placeholder="#{I18N['application.detailproductpage.placeholderproductname']}"
                                         validatorMessage="#{I18N['application.detailproductpage.messageerrorproductname']}">
                                <p:ajax update="messageProductName" event="keyup"/>
                            </p:inputText>
                        </span>
                        <p:message id="messageProductName" for="@previous"/>
                    </span>

                    <!-- + bouton retour page (previous historic). -->
                    <!-- + bouton add panier. -->

                    <span class="responsiveSubmit">
                        <p:commandButton value="#{I18N['application.detailproductpage.buttoncreatesubmit']}"
                                         rendered="#{pricePlatformBean.isModeSelected('c')}"
                                         ajax="false"
                                         validateClient="true"
                                         class="ui-button-success"
                                         action="#{pricePlatformBean.submitForm()}"/>
                        <p:commandButton rendered="#{pricePlatformBean.isModeSelected('r')}"
                                         class="ui-button-success hiddenBlock"/>
                        <p:commandButton value="#{I18N['application.detailproductpage.buttonupdatesubmit']}"
                                         rendered="#{pricePlatformBean.isModeSelected('u')}"
                                         ajax="false"
                                         validateClient="true"
                                         class="ui-button-success"
                                         action="#{pricePlatformBean.submitForm(historicalBean.backLastPageHistoric())}"/>
                    </span>

                </h:form>
                <div class="responsiveForm positionCancel">
                    <span class="responsiveSubmit">
                        <span class="flexGrowOne"> </span>
                            <p:commandButton id="cancelButtonSignUp"
                                             value="#{I18N['application.detailproductpage.buttonbacklastpage']}"
                                             action="#{historicalBean.backLastPageHistoric()}"
                                             class="ui-button-danger"/>
                    </span>
                </div>
                <!-- Main form end ________________________________________________________________ -->

            </p:outputPanel>

        </div>

    </ui:define>
</ui:composition>

<!-- ______ ______ -->

</html>


